![image-20200623104415357](操作系统复习.assets\image-20200623104415357.png)

![image-20200623111657318](操作系统复习.assets\image-20200623111657318.png)

![image-20200623111734234](操作系统复习.assets\image-20200623111734234.png)

![image-20200623155458728](操作系统复习.assets\image-20200623155458728.png)

![image-20200623155800638](操作系统复习.assets\image-20200623155800638.png)

* 程序的虚拟内存：在操作系统看来，将固态硬盘虚拟化成内存当成内存调用
* 磁盘的虚拟内存：将一部分空间用来放置本应放在内存中的程序库放置在磁盘的某一部分方便调用。

![image-20200623162310255](操作系统复习.assets\image-20200623162310255.png)

![image-20200623172726158](操作系统复习.assets\image-20200623172726158.png)

![image-20200623173207584](操作系统复习.assets\image-20200623173207584.png)

![image-20200623181206562](操作系统复习.assets\image-20200623181206562.png)

* TBL中用到的关联存储器可以并发查找，难以设计
  ![image-20200623222016621](操作系统复习.assets\image-20200623222016621.png)
* 并发和命中率，还要考虑每组的查询时间。成本高

![image-20200623211007700](操作系统复习.assets\image-20200623211007700.png)

* 前一级页表不存在的后面的就不需要保存了

  ![image-20200623212948798](操作系统复习.assets\image-20200623212948798.png)

![image-20200623211854896](操作系统复习.assets\image-20200623211854896.png)

* 页表使用的是基于逻辑地址的页表大小，二页寄存器用的是物理地址的内存

![image-20200623212837049](操作系统复习.assets\image-20200623212837049.png)

* 像TLB

![image-20200623214656404](操作系统复习.assets\image-20200623214656404.png)

* 需要高效的函数、硬件、碰撞处理来实现由逻辑地址到物理地址的转换
* 相较于基于逻辑地址的页表，其每个程序都需要页表，而分级的的初始级也必须记录其存在与否，以免遍历降低速率，但认识会有大量的内存浪费，若基于物理地址的页表，全部只需存在一个，但是逻辑地址根据程序生成，可能回对同一个物理地址有多条调用，如何让逻辑地址能定位到物理地址是个问题。



# 程序中断

中断请求触发器（INTR），中断屏蔽触发器（MASK）二者成对出现。
接口中的完成触发器D,为1表示设备准备就绪。
中断源：凡是能够向CPU提出中断请求的各种因素都叫中断源。

因此，有多个中断源，但是，CPU某一时刻只接受一个中断源。那么其他的中断源怎么办？
老办法：排队等候啊。
如何选择中断源？也是老办法，谁优先级高就选谁。正在处理中断呢，能不能被打断？
答案是可以的，优先级的作用也在这里，且是双向的，更高优先级的可以打断，但级别低的不许打断。MASK就是封锁级别低的中断请求的触发器。

CPU在何时查询中断请求？

答案是统一的时间：在每条指令执行阶段的最后时刻，查询所有的设备时候有中断请求。

如何对中断源排序？
有个原则：速度越高的I/O设备，优先级越高，因为若CPU不及时响应高速I/O设备的请求，信息可能会立即损失。

中断向量

中断向量是中断服务程序的入口地址。

CPU响应中断的流程是：暂停现有程序，转去执行该设备的中断服务程序。不同的设备有不同的中断服务程序。
每个服务程序都有一个入口地址，CPU要找到这个入口地址。

> 向量地址送到PC,查找中断服务程序的入口地址。因为向量地址中存放的是无条件转移指令。

**一次中断处理过程可归纳为中断请求，中断判优，中断响应，中断服务和中断返回。**

**中断服务程序的流程，主要是四大部分：保护现场，中断服务，恢复现场，中断返回。**

**保护现场又分为两个部分的保护：**
**保护程序的断点（PC）：由中断隐指令完成（一关，二保，三引）**
**保护通用寄存器和状态寄存器的内容：由中断服务程序完成**